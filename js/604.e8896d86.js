(self["webpackChunkventaproductos"]=self["webpackChunkventaproductos"]||[]).push([[604],{3604:(t,e,o)=>{"use strict";o.r(e),o.d(e,{default:()=>L});var s=o(3673);const a=(0,s.HX)("data-v-14b8ab14");(0,s.dD)("data-v-14b8ab14");const l={class:"row justify-center q-py-md"},n={class:"col-10 bordes q-gutter-x-sm"},i=(0,s.Wm)("h3",{class:"text-center"},"Principal",-1),d={class:"row justify-center q-gutter-x-md"},r={class:"col-6"},c={class:"col-3"},u={class:"col-2"},m=(0,s.Wm)("h3",null,"Componente Hijo",-1);(0,s.Cn)();const p=a(((t,e,o,p,h,g)=>{const b=(0,s.up)("q-input"),f=(0,s.up)("q-btn"),v=(0,s.up)("hijo"),W=(0,s.up)("q-page");return(0,s.wg)(),(0,s.j4)(W,null,{default:a((()=>[(0,s.Wm)("div",l,[(0,s.Wm)("div",n,[i,(0,s.Wm)("div",d,[(0,s.Wm)("div",r,[(0,s.Wm)(b,{filled:"",type:"text",modelValue:t.text,"onUpdate:modelValue":e[1]||(e[1]=e=>t.text=e),label:"Descripción"},null,8,["modelValue"])]),(0,s.Wm)("div",c,[(0,s.Wm)(b,{filled:"",type:"number",modelValue:t.monto,"onUpdate:modelValue":e[2]||(e[2]=e=>t.monto=e),label:"Monto del producto"},null,8,["modelValue"])]),(0,s.Wm)("div",u,[(0,s.Wm)(f,{color:"positive",glossy:"",label:"Agregar",onClick:e[3]||(e[3]=e=>{t.Agregar(),t.Sumar()})})])]),(0,s.Wm)(v,null,{titulo:a((()=>[m])),_:1})])])])),_:1})}));var h=o(515),g=o.n(h),b=(o(107),o(2323));const f={class:"col-6 text-center"},v={class:"col-6 text-center"},W={class:"q-pa-md"},w={class:"text-right"},x={class:"text-right text-red"},k={class:"text-right text-primary text-bold"};function H(t,e,o,a,l,n){const i=(0,s.up)("q-td"),d=(0,s.up)("q-btn"),r=(0,s.up)("q-tr"),c=(0,s.up)("q-table"),u=(0,s.up)("q-card-section"),m=(0,s.up)("q-separator"),p=(0,s.up)("q-card");return(0,s.wg)(),(0,s.j4)(s.HY,null,[(0,s.Wm)("div",f,[(0,s.WI)(t.$slots,"titulo")]),(0,s.Wm)("div",v,[(0,s.WI)(t.$slots,"subtitulo")]),(0,s.Wm)("div",W,[(0,s.Wm)(c,{columns:a.columns,rows:t.productos,"row-key":"name","no-data-label":"No hay productos para mostrar","hide-bottom":"","rows-per-page-options":[10,20]},{body:(0,s.w5)((e=>[(0,s.Wm)(r,{props:e},{default:(0,s.w5)((()=>[(0,s.Wm)(i,{key:"descripcion",props:e,class:[e.row.estado?"text-negative text-strike bg-red-2":"text-dark"]},{default:(0,s.w5)((()=>[(0,s.Wm)("div",null,(0,b.zw)(e.row.descripcion),1)])),_:2},1032,["props","class"]),(0,s.Wm)(i,{key:"monto",props:e,class:[e.row.estado?"text-negative text-strike bg-red-2":"text-dark"]},{default:(0,s.w5)((()=>[(0,s.Wm)("div",null,(0,b.zw)(e.row.monto),1)])),_:2},1032,["props","class"]),(0,s.Wm)(i,{key:"cancelado",props:e,class:[e.row.estado?"bg-red-2":"text-dark"]},{default:(0,s.w5)((()=>[(0,s.Wm)(d,{color:"negative",label:"X",onClick:o=>t.Borrados(e.row.monto),disabled:e.row.estado},null,8,["onClick","disabled"])])),_:2},1032,["props","class"])])),_:2},1032,["props"])])),_:1},8,["columns","rows"]),(0,s.Wm)(p,{class:t.getSumados},{default:(0,s.w5)((()=>[(0,s.Wm)(u,null,{default:(0,s.w5)((()=>[(0,s.Wm)("div",w,"Sub-Total: "+(0,b.zw)(t.suma)+" CLP",1)])),_:1}),(0,s.Wm)(m),(0,s.Wm)(u,null,{default:(0,s.w5)((()=>[(0,s.Wm)("div",x,"Descuento del 15%: "+(0,b.zw)((t.suma*a.descuento).toFixed(2))+" CLP",1)])),_:1}),(0,s.Wm)(m),(0,s.Wm)(u,null,{default:(0,s.w5)((()=>[(0,s.Wm)("div",k,"Total a pagar: "+(0,b.zw)((t.suma-t.suma*a.descuento).toFixed(2))+" CLP",1)])),_:1})])),_:1},8,["class"])])],64)}var q=o(1959),y=o(7874);const C=[{name:"descripcion",label:"Descripción",align:"left",field:"descripcion",sortable:!0},{name:"monto",label:"Monto",align:"center",field:"monto",sortable:!0},{name:"cancelado",label:"¿Eliminar el producto?",align:"center",field:"cancelado"}],Z={setup(){let t=.15;return{columns:C,rows:(0,q.iH)([]),descuento:t}},computed:g()(g()(g()({},(0,y.rn)("data",["suma","actualiza"])),(0,y.Se)("data",["productos"])),(0,y.nv)("data",["getSumados"])),methods:g()({},(0,y.OI)("data",["Borrados","updateData"]))};var _=o(6724),Q=o(8186),j=o(3884),I=o(1289),O=o(4842),S=o(8240),T=o(151),z=o(5589),D=o(5869),P=o(7518),V=o.n(P);Z.render=H;const A=Z;V()(Z,"components",{QTable:_.Z,QTr:Q.Z,QTd:j.Z,QPopupEdit:I.Z,QInput:O.Z,QBtn:S.Z,QCard:T.Z,QCardSection:z.Z,QSeparator:D.Z});const B=[{name:"descripcion",label:"Descripción",align:"left",field:"descripcion",sortable:!0},{name:"monto",label:"Monto",align:"center",field:"monto",sortable:!0},{name:"cancelado",label:"¿Cancelar producto?",align:"center",field:"cancelado"}],E=(0,s.aZ)({components:{Hijo:A},name:"PageIndex",setup(){let t=(0,q.iH)([]),e=(0,q.iH)(0),o=(0,q.iH)([]),s=(0,q.iH)(.15),a=(0,q.iH)(0),l=(0,q.iH)([]);return{columns:B,rows:(0,q.iH)([]),text:(0,q.iH)(""),monto:(0,q.iH)(""),info:t,suma:e,datos:o,descuento:s,pagoTotal:a,selected:(0,q.iH)([]),isActivo:(0,q.iH)(!0),contenido:l}},methods:g()(g()({},(0,y.OI)("data",["Agregados"])),{},{Agregar(){let t={descripcion:this.text,monto:parseFloat(this.monto),estado:!1};this.info.push(t),this.datos.push(t.monto),this.Agregados(t),this.text="",this.monto=""},Sumar(){this.suma=Object.values(this.datos).reduce(((t,e)=>t+e)),console.log("la suma es: ",this.suma),this.pagoTotal=this.suma-this.suma*this.descuento},Borrar(t){console.log(t);let e=this.info.find((e=>e.monto===t)),o=this.datos.indexOf(t),s=this.info.indexOf(e);console.log("el indice de las compras es:",s),console.log("el index del array es: ",o),this.datos.splice(o,1),0!==this.datos.length?this.suma=Object.values(this.datos).reduce(((t,e)=>t+e)):(this.datos=[],this.suma=0),console.log("la nueva suma es: ",this.suma),this.pagoTotal=this.suma-this.suma*this.descuento,this.info[s].estado=!0},actualizar(t){let e=this.info.find((e=>e.monto===t)),o=this.info.indexOf(e);this.datos[o]=t,this.sumar}}),computed:{getDatos(){return this.info},contenidoValores(){return this.info.forEach((t=>this.contenido.push(t.monto))),console.log(Object.values(this.contenido))}}});var F=o(4379);E.render=p,E.__scopeId="data-v-14b8ab14";const L=E;V()(E,"components",{QPage:F.Z,QInput:O.Z,QBtn:S.Z})}}]);